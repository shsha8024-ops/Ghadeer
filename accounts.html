<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ghadeer Logistics | Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</title>
  <link rel="stylesheet" href="assets/css/theme.css">
</head>
<body>
  <header class="app-header">
    <div class="brand">
      <div class="brand-mark">GL</div>
      <h1>Ghadeer Logistics</h1>
    </div>
    <nav class="nav-links">
      <a class="nav-link" href="Home.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
      <a class="nav-link" href="about.html">Ø¹Ù† Ø§Ù„Ø´Ø±ÙƒØ©</a>
      <a class="nav-link" href="dashboard.html">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
      <a class="nav-link active" href="accounts.html">Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</a>
      <a class="nav-link" href="track.html">ØªØªØ¨Ø¹ Ø§Ù„Ø´Ø­Ù†Ø§Øª</a>
      <a class="nav-link" href="Reportal.html">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</a>
      <a class="nav-link" href="contact.html">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a>
      <a class="nav-link" href="index.html">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
    </nav>
  </header>

  <main class="page-shell">
    <section class="glass-card hero-card">
      <h2 class="page-title">Ø¥Ø¯Ø§Ø±Ø© Ø¹Ù…Ù„Ø§Ø¡ Ghadeer</h2>
      <p class="lead">Ø£Ø¶Ù Ø¹Ù…Ù„Ø§Ø¡ Ø¬Ø¯Ø¯ØŒ Ø±Ø§Ø¬Ø¹ Ø­Ø³Ø§Ø¨Ø§ØªÙ‡Ù…ØŒ ÙˆØªØ§Ø¨Ø¹ ÙÙˆØ§ØªÙŠØ±Ù‡Ù… Ù…Ù† Ù…ÙƒØ§Ù† ÙˆØ§Ø­Ø¯ Ù…Ø¹ Ù…Ø²Ø§Ù…Ù†Ø© Ù…Ø­Ù„ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©.</p>
      <div class="chip-row">
        <span class="chip">ğŸ’¾ ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ Ø¢Ù…Ù†</span>
        <span class="chip">ğŸ” Ø¨Ø­Ø« ÙÙˆØ±ÙŠ</span>
        <span class="chip">ğŸ“Š Ù…Ù„Ø®ØµØ§Øª Ù…Ø§Ù„ÙŠØ©</span>
      </div>
    </section>

    <section class="glass-card table-card">
      <div class="table-header">
        <div class="section-heading">
          <div>
            <h2>Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h2>
            <p>Ø£Ø¶Ù Ø¹Ù…ÙŠÙ„Ù‹Ø§ Ø¬Ø¯ÙŠØ¯Ù‹Ø§ Ø£Ùˆ Ù‚Ù… Ø¨Ø§Ù„Ø¨Ø­Ø« Ø¯Ø§Ø®Ù„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©.</p>
          </div>
        </div>
        <div class="toolbar">
          <form id="clientForm" class="form-grid inline" onsubmit="addClient(event)">
            <div>
              <label for="clientName">Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label>
              <input type="text" id="clientName" placeholder="Ù…Ø«Ø§Ù„: Ø´Ø±ÙƒØ© Ø´Ù…Ø§Ù„ ÙƒØ±Ø¯Ø³ØªØ§Ù†" required>
            </div>
            <button class="button primary" type="submit">â• Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„</button>
          </form>
          <div>
            <label for="search">Ø¨Ø­Ø«</label>
            <input type="text" id="search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù…ÙŠÙ„..." oninput="render()">
          </div>
        </div>
      </div>

      <div class="table-scroll">
        <table class="data-table">
          <thead>
            <tr>
              <th>ğŸ‘¤ Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
              <th>ğŸ“‘ Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</th>
              <th>ğŸ’° Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨</th>
              <th>âš™ï¸ Ø®ÙŠØ§Ø±Ø§Øª</th>
            </tr>
          </thead>
          <tbody id="clients"></tbody>
        </table>
      </div>
    </section>

    <p class="footer-note">ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø¶Ù…Ø§Ù† Ø³Ø±Ø¹Ø© Ø§Ù„ÙˆØµÙˆÙ„ ÙˆØ³Ù‡ÙˆÙ„Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©.</p>
  </main>

  <script>
    let accounts = JSON.parse(localStorage.getItem('accounts')) || {};

    function render() {
      const tbody = document.getElementById('clients');
      tbody.innerHTML = '';
      const query = document.getElementById('search').value.trim();
      const normalizedQuery = query.toLowerCase();

      Object.keys(accounts).forEach((client) => {
        const normalizedClient = client.toLowerCase();
        if (normalizedQuery && !normalizedClient.includes(normalizedQuery)) {
          return;
        }

        const invoices = accounts[client];
        const total = invoices.reduce((sum, entry) => sum + Number(entry.price || 0), 0);
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${client}</td>
          <td>${invoices.length}</td>
          <td>${total.toLocaleString('en-US')}</td>
          <td>
            <div class="action-buttons">
              <button class="action-button view" onclick="viewClient('${client}')">ğŸ‘ï¸ Ø¹Ø±Ø¶</button>
              <button class="action-button edit" onclick="editClient('${client}')">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>
              <button class="action-button delete" onclick="deleteClient('${client}')">ğŸ—‘ï¸ Ø­Ø°Ù</button>
            </div>
          </td>`;
        tbody.appendChild(row);
      });
    }

    function addClient(event) {
      event.preventDefault();
      const nameField = document.getElementById('clientName');
      const name = nameField.value.trim();
      if (!name) {
        return;
      }
      if (!accounts[name]) {
        accounts[name] = [];
      }
      localStorage.setItem('accounts', JSON.stringify(accounts));
      render();
      event.target.reset();
      nameField.focus();
    }

    function viewClient(name) {
      window.location.href = 'client.html?name=' + encodeURIComponent(name);
    }

    function editClient(oldName) {
      const newName = prompt('Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø¹Ù…ÙŠÙ„:', oldName);
      if (newName && newName !== oldName) {
        accounts[newName] = accounts[oldName];
        delete accounts[oldName];
        localStorage.setItem('accounts', JSON.stringify(accounts));
        render();
      }
    }

    function deleteClient(name) {
      if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙˆØ¬Ù…ÙŠØ¹ ÙÙˆØ§ØªÙŠØ±Ù‡ØŸ')) {
        delete accounts[name];
        localStorage.setItem('accounts', JSON.stringify(accounts));
        render();
      }
    }

    render();
  </script>
</body>
</html>
